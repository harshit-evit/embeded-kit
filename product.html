<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="STM32 Embedded Development Kit - Interactive Manual with detailed component specifications">
    <title>STM32 Kit Interactive Manual</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f0f23, #1a1a3e, #2d1b69);
            color: #e0e6ed;
            line-height: 1.7;
            overflow-x: hidden;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, #00d4ff, #ff6b6b);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .close-btn {
            background: rgba(255, 107, 107, 0.2);
            border: 2px solid #ff6b6b;
            color: #ff6b6b;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            
        }

        .close-btn:hover {
            background: rgba(255, 107, 107, 0.3);
            transform: scale(1.05);
        }

        /* Main Container */
        .main-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding-top: 50px;
           
        }

        /* Product Image Section */
        .product-section {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            margin: 2rem;
            position: relative;
            transition: all 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
            margin-bottom: 20px; /* gap between image and cards */
        }

        .product-section.detailed {
            flex: 0.6;
        }

        .product-image-container {
            position: relative;
            max-width: 600px;
            max-height: 600px;
            width: 100%;
        }

        .product-image {
            width: 100%;
            height: auto;
            
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transition: all 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        /* Highlight Rectangle */
        .highlight-rect {
            position: absolute;
            border: 3px solid #ffe600;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 8px;
            opacity: 0;
            transition: all 0.5s ease;
            box-shadow: 0 0 20px rgba(217, 255, 0, 0.5);
            animation: pulse 2s infinite;
        }

        .highlight-rect.active {
            opacity: 1;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(229, 255, 0, 0.5); }
            50% { box-shadow: 0 0 30px rgba(208, 255, 0, 0.8); }
        }

        /* Sections List */
            .sections-list {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            padding: 0 1rem 1.5rem;
            margin: 1rem;
            box-sizing: border-box;
            z-index: 50;

        }


        .sections-list.hidden {
            opacity: 0;
            transform: translateX(50px);
            pointer-events: none;
        }

        .section-category {
            margin-bottom: 2.5rem;
        }

        .category-title {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            background: linear-gradient(135deg, #00d4ff, #ff6b6b);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1.5rem;
        }

        .section-item {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.05), rgba(255, 107, 107, 0.05));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .section-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .section-item:hover::before {
            left: 100%;
        }

        .section-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 212, 255, 0.3);
        }

        .section-item h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: #e0e6ed;
        }

        .section-item p {
            color: #b8c5d1;
            font-size: 0.95rem;
        }

        /* Detail View */
        .detail-view {
            flex: 1;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(15, 15, 35, 0.9), rgba(45, 27, 105, 0.7));
            border-radius: 25px;
            margin: 2rem;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: none;
            overflow-y: auto;
        }

        .detail-view.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .detail-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #00d4ff, #ff6b6b);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 2rem;
        }

        .detail-content {
            display: grid;
            gap: 2rem;
        }

        .spec-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 100%;
        }

        .spec-title {
            font-size: 1.3rem;
            color: #00d4ff;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .spec-list {
            list-style: none;
            margin-bottom: 1rem;
        }

        .spec-list li {
            padding: 0.3rem 0;
            color: #b8c5d1;
        }

        .spec-list li strong {
            color: #e0e6ed;
        }

        .component-image {
            width: 100%;
            max-width: 300px;
            height: auto;
            border-radius: 10px;
            margin: 1rem 0;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: #e0e6ed;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        

    .section-card {
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.05), rgba(255, 107, 107, 0.05));
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.3s ease;
    width: 280px; /* fixed width on larger screens */
    max-width: 500px;
    padding:10px;
    margin-top:10px;
    text-align: center;
    
}

    .section-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 212, 255, 0.2);
        border-color: rgba(0, 212, 255, 0.3);
    }

    .card-image {
        width: 100%;
        height: 160px;
        object-fit: cover;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .card-body {
        padding: 1rem;
        flex: 1;
    }

    .card-title {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #e0e6ed;
    }

    .card-description {
        font-size: 0.9rem;
        color: #b8c5d1;
    }
    .multi-image {
    max-width: 200px;
    margin: 0.5rem;
    float: left;
    border-radius: 6px;
    border: 1px solid rgba(255,255,255,0.1);
    object-fit: cover;
}

/* Clear floats inside the container */
.spec-card::after {
    content: "";
    display: table;
    clear: both;
}

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-container {
                flex-direction: column;
                padding-top: 50px;
            }

            .product-section {
                flex: none;
                height: 50vh;
            }

            .product-section.detailed {
                height: 40vh;
            }

            .sections-list, .detail-view {
                flex: none;
            }
           
        }

        @media (max-width: 768px) {
            .main-container {
                padding-top: 50px;
            }

            header {
                padding: 0.5rem 1rem;
            }

            .logo {
                font-size: 1.5rem;
            }

            .product-section {
                padding: 1rem;
            }

            .sections-list, .detail-view {
                padding: 1rem;
                margin: 1rem;
            }

            .category-title {
                font-size: 1.5rem;
            }

            .detail-title {
                font-size: 2rem;
            }
            .section-card {
            }
             
        }

    </style>
</head>
<body x-data="kitManual()">
    <header>
        <button class="close-btn" x-show="selectedSection" @click="closeDetail()" x-transition>
            ← Back to Sections
        </button>
    </header>

    <div class="main-container">
        <!-- Product Image Section -->
        <div class="product-section" :class="{ detailed: selectedSection }">
            <div class="product-image-container">
                <img src="esp-img/esp2_2.png" 
                     alt="STM32 Embedded Kit" 
                     class="product-image" 
                     id="mainImage">
                
                <!-- Highlight Rectangle -->
                
                 <template x-if="selectedSection && selectedSection.highlights && selectedSection.highlights.length">
                    <template x-for="(hl, index) in selectedSection.highlights" :key="index">
                        <div class="highlight-rect active" 
                             :style="getHighlightStyle(hl)">
                        </div>
                    </template>
                </template>
            </div>
        </div>

        <!-- Sections List -->
        <div class="sections-list" x-show="!selectedSection">
            <template x-for="category in categories" :key="category.name">
                <div class="section-category">
                    <h2 class="category-title" x-text="category.name"></h2>
                    <template x-for="section in category.sections" :key="section.id">
                        <div class="section-card" @click="selectSection(section)">
                            <h3 x-text="section.title"></h3>
                            <!-- <p x-text="section.description"></p> -->
                        </div>
                    </template>
                </div>
            </template>
        </div>


        <!-- Detail View -->
        <div class="detail-view" :class="{ active: selectedSection }" x-show="selectedSection">
            <template x-if="selectedSection">
                <div>
                    <h1 class="detail-title" x-text="selectedSection.title"></h1>
                    <div class="detail-content">
                        <!-- Component Image -->
                        <div class="spec-card" 
                             x-show="selectedSection.images.length>0">

                            <template x-for="(img, index) in selectedSection.images" :key="index">
                                <img :src="img" 
                                     :alt="selectedSection.title + ' - ' + (index+1)" 
                                     class="component-image multi-image">
                            </template>
                        </div>
                        <!-- Components -->
                        <div class="spec-card" x-show="selectedSection.components.length>0">
                            <h3 class="spec-title">Components</h3>
                            <ul class="spec-list">
                                <template x-for="spec in selectedSection.components" :key="spec">
                                    <li x-html="spec"></li>
                                </template>
                            </ul>
                        </div>
                        <!-- Specifications -->
                        <div class="spec-card" x-show="selectedSection.specifications.length>0">
                            <h3 class="spec-title">Specifications</h3>
                            <ul class="spec-list">
                                <template x-for="spec in selectedSection.specifications" :key="spec">
                                    <li x-html="spec"></li>
                                </template>
                            </ul>
                        </div>

                        <!-- Connections -->
                        <div class="spec-card" x-show="selectedSection.connections.length>0">
                            <h3 class="spec-title">Connections</h3>
                            <ul class="spec-list">
                                <template x-for="conn in selectedSection.connections" :key="conn">
                                    <li x-html="conn"></li>
                                </template>
                            </ul>
                        </div>

                        <!-- Code Example -->
                        <!-- <div class="spec-card" x-show="selectedSection.code">
                            <h3 class="spec-title">Code Example</h3>
                            <div class="code-block">
                                <pre x-text="selectedSection.code"></pre>
                            </div>
                        </div> -->

                        <!-- Description -->
                        <div class="spec-card">
                            <h3 class="spec-title">Description</h3>
                            <p x-text="selectedSection.fullDescription"></p>
                        </div>
                    </div>
                </div>
            </template>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script>
        function kitManual() {
            return {
                selectedSection: null,
                imageWidth: 600,
                imageHeight: 400,
                
                categories: [
                    {
                        name: "Standard Part",
                        sections: [
                            {
                                id: 'i2c',
                                title: 'Serial I2C Section',
                                description: 'EEPROM and MPU6050 sensor with I2C communication',
                                images: ['parts/ic2.jpg',],
                                highlights:[ { x: 14, y: 1, width: 14, height: 18 },],
                                components:['<strong>EEPROM:</strong> Non-volatile data storage',
                                    '<strong>MPU6050:</strong> 6-axis motion tracking sensor',],
                                specifications: [
                                    
                                ],
                                connections: [
                                    '<strong>SDA</strong> → B7',
                                    '<strong>SCL</strong> → B6'
                                ],
                                code: `// I2C Initialization\n#include "stm32f1xx_hal.h"\n\nI2C_HandleTypeDef hi2c1;\n\nvoid I2C_Init(void) {\n    hi2c1.Instance = I2C1;\n    hi2c1.Init.ClockSpeed = 100000;\n    hi2c1.Init.DutyCycle = I2C_DUTYCYCLE_2;\n    HAL_I2C_Init(&hi2c1);\n}`,
                                fullDescription: 'The I2C section includes an EEPROM for non-volatile storage and an MPU6050 6-axis motion sensor. This combination provides both data persistence and motion tracking capabilities for advanced embedded applications.'
                            },
                            {
                                id: 'can',
                                title: 'CAN Bus Interface',
                                description: 'SN65HVD230 transceiver for industrial communication',
                                images:['parts/can.jpg' ,],
                                highlights:[ { x: 2, y: 1, width: 14, height: 18 },],
                                specifications: [
                                    '<strong>Operating Voltage:</strong> 3.3V (Compatible with 5V logic)',
                                    '<strong>Data Rate:</strong> Up to 1 Mbps',
                                    '<strong>Bus Interface:</strong> CAN_H, CAN_L (Differential signaling)',
                                    '<strong>Communication Standard:</strong> ISO 11898-2 (High-speed CAN)',
                                    '<strong>Low-Power Mode:</strong> Silent mode support'
                                ],
                                connections: [
                                    '<strong>CTX</strong> → B9',
                                    '<strong>CRX</strong> → B8'
                                ],
                                code: `// CAN Configuration\nCAN_HandleTypeDef hcan;\n\nvoid CAN_Init(void) {\n    hcan.Instance = CAN1;\n    hcan.Init.Prescaler = 18;\n    hcan.Init.Mode = CAN_MODE_NORMAL;\n    hcan.Init.SyncJumpWidth = CAN_SJW_1TQ;\n    HAL_CAN_Init(&hcan);\n}`,
                                fullDescription: 'The SN65HVD230 is a CAN (Controller Area Network) transceiver used for high-speed serial communication in industrial, automotive, and embedded systems. It converts TTL signals from a microcontroller into differential signals for CAN Bus communication. Connected with the MCU via Dip-Switch. '
                            },
                            {
                                id: 'uart',
                                title: 'Serial UART RS232',
                                description: 'DB9 connector with MAX232 for RS-232 communication',
                                images:['parts/uart.jpg'],
                                highlights:[ { x: 3, y: 18, width: 15, height: 10 },],
                                specifications: [
                                ],
                                connections: [
                                    '<strong>RX</strong> → A10',
                                    '<strong>TX</strong> → A9'
                                ],
                                code: `// UART Configuration\nUART_HandleTypeDef huart1;\n\nvoid UART_Init(void) {\n    huart1.Instance = USART1;\n    huart1.Init.BaudRate = 9600;\n    huart1.Init.WordLength = UART_WORDLENGTH_8B;\n    huart1.Init.StopBits = UART_STOPBITS_1;\n    HAL_UART_Init(&huart1);\n}`,
                                fullDescription: `he DB9 connector is used for RS-232 serial communication, and the MAX232 IC converts RS-232 
                                    signals to TTL (Transistor-Transistor Logic) levels for microcontrollers. This setup allows serial 
                                    communication between a MCU or other devices.`
                            },
                            {
                                id: 'analog',
                                title: 'Analog Input',
                                description: '',
                                images:['parts/analog.png',],
                                highlights:[ { x: 2, y: 27, width: 15, height: 7 },],
                                specifications: [
                                   
                                ],
                                components:['10k Potentiometer ','Used to provide variable resistance for adjusting voltage or controlling input values.'
                                ],
                                connections: [
                                    '<strong>POT</strong> → A0'
                                ],
                                code: `// ADC Configuration\nADC_HandleTypeDef hadc1;\n\nvoid ADC_Init(void) {\n    hadc1.Instance = ADC1;\n    hadc1.Init.ScanConvMode = ADC_SCAN_DISABLE;\n    hadc1.Init.ContinuousConvMode = DISABLE;\n    HAL_ADC_Init(&hadc1);\n}`,
                                fullDescription: ''
                            },
                            {
                                id: 'mcu',
                                title: 'Mico-controller',
                                description: 'STM32F103C8T6 32-bit ARM Cortex-M3 microcontroller',
                                images:['parts/mcu.jpg',],
                                highlights:[ { x: 17, y: 18, width: 22, height: 27 },],
                                specifications: [
                                    '<strong>MCU:</strong> STM32F103C8T6',
                                    '<strong>Core:</strong> ARM Cortex-M3 72MHz',
                                    '<strong>Flash:</strong> 64KB',
                                    '<strong>RAM:</strong> 20KB',
                                    '<strong>GPIO:</strong> 48 pins total'
                                ],
                                connections: [
                                    '<strong>Operating Voltage:</strong> 3.3V',
                                    '<strong>Input Tolerance:</strong> 5V on I/O pins'
                                ],
                                code: `// System Clock Configuration\nvoid SystemClock_Config(void) {\n    RCC_OscInitTypeDef RCC_OscInitStruct = {0};\n    RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};\n    \n    RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;\n    RCC_OscInitStruct.HSEState = RCC_HSE_ON;\n    HAL_RCC_OscConfig(&RCC_OscInitStruct);\n}`,
                                fullDescription: `The STM32F103C8T6 is a 64KB Flash, Cortex-M3 microcontroller running at 72MHz. It features 20KB 
                                    RAM, multiple communication interfaces (UART, SPI, I2C, CAN), 12-bit ADC, and PWM support.It 
                                    has total 48 pins and It operates at 3.3V with 5V-tolerant I/O and is used in this embedded kit. `
                            },
                            {
                                id: 'rtc',
                                title: 'RTC Cell',
                                description: 'Real-Time Clock backup with CR2032 battery on VBAT pin',
                                images: ['parts/rtccell.png'],
                                highlights: [
                                    { x: 1, y: 33, width: 17, height: 13 }
                                ],
                                specifications: [
                                    '<strong>Functionality:</strong> Maintains RTC and backup registers when main power is off',
                                    '<strong>VBAT Pin:</strong> Provides backup power to RTC when VCC is removed',
                                    '<strong>Power Source:</strong> CR2032 coin cell battery',
                                    '<strong>RTC Retention:</strong> Keeps time/date even when board is disconnected from power',
                                    '<strong>If VBAT is not connected:</strong> RTC resets when power is lost'
                                ],
                                connections: [
                                    '<strong>Positive Terminal (+):</strong> Connect to VBAT pin',
                                    '<strong>Negative Terminal (-):</strong> Connect to GND'
                                ],
                                code: `// Example: RTC Initialization
                            RTC_HandleTypeDef hrtc;

                            void RTC_Init(void) {
                                hrtc.Instance = RTC;
                                hrtc.Init.AsynchPrediv = RTC_AUTO_1_SECOND;
                                hrtc.Init.OutPut = RTC_OUTPUT_DISABLE;
                                HAL_RTC_Init(&hrtc);
                            }`,
                                fullDescription: `The STM32F103C8T6 microcontroller includes a built-in Real-Time Clock (RTC) that can run even when the main power supply (VCC) is removed. This is made possible by connecting a CR2032 battery to the VBAT pin, which powers the RTC and maintains timekeeping as well as backup registers. If VBAT is not connected, the RTC will reset when power is lost.`
                            },
                            {
                               id: 'keypad',
                               title: 'Matrix Keypad',
                               description: 'Numeric keypad with DIP switch for configuration in embedded systems',
                               images: ['parts/keypad.png'],
                               highlights: [
                                   { x: 40, y: 18, width: 30, height: 27 }
                               ],
                               specifications: [
                                   '<strong>Rows:</strong> 4 (R1, R2, R3, R4)',
                                   '<strong>Columns:</strong> 3 (C1, C2, C3)',
                                   '<strong>Total Keys:</strong> 12 (0-9, *, #)',
                                   '<strong>Operating Voltage:</strong> 3.3V',
                                   '<strong>Interface:</strong> Digital GPIO',
                                    '<strong>DIP Switch Type:</strong> SPST (Single Pole Single Throw)',
                                   '<strong>Positions:</strong> ON/OFF'
                               ],
                               connections: [
                                   '<strong>Rows:</strong> R1 → A5, R2 → A6, R3 → A7, R4 → B0',
                                   '<strong>Columns:</strong> C1 → B1, C2 → A2, C3 → B10'
                               ],
                               code: `// Example: Reading 4x3 Keypad
                            include "keypad.h"
                                                        
                            oid Keypad_Init(void) {
                               // Configure GPIO pins for keypad rows & columns

                                                        
                            har Keypad_GetKey(void) {
                               // Scan keypad and return pressed key
                            `,
                               fullDescription: `The 4x3 matrix keypad is a popular input device featuring 4 rows and 3 columns, giving a total of 12 keys (0–9, *, #). 
                            t operates at 3.3V and connects to the microcontroller via digital GPIO pins. 
                             DIP switch is included to allow configuration of special modes or input settings, using SPST switches in ON/OFF positions.`,
                            },
                            {
                                id:'power switch',
                                title:'Power Switch',
                                description:"It controls the power delivered to the standard part ",
                                fullDescription:"It controls the power delivered to the standard part ",
                                images:['parts/power_switch.png'],
                                highlights: [
                                   { x: 86, y: 32, width: 7, height: 13 }
                               ],
                            },
                            {
                                id: 'general_output',
                                title: 'General & Digital Output',
                                description: 'Relays, buzzer, and LED for general digital output control',
                                images: ['parts/ouputgd.png'],
                                highlights: [
                                    { x:67, y: 17, width: 25, height: 17 }
                                ],
                                specifications: [
                                    '<strong>Relays:</strong> 2 units (RLY1, RLY2) for controlling high-power devices',
                                    '<strong>Buzzer:</strong> Connected to A3, provides audio feedback',
                                    '<strong>LED:</strong> Connected to C13, acts as a status indicator'
                                ],
                                connections: [
                                    '<strong>RLY1:</strong> A1',
                                    '<strong>RLY2:</strong> A4',
                                    '<strong>Buzzer:</strong> A3',
                                    '<strong>LED:</strong> C13'
                                ],
                                code: `// Example: Controlling Digital Outputs
                            HAL_GPIO_WritePin(GPIOA, GPIO_PIN_1, GPIO_PIN_SET); // Activate Relay 1
                            HAL_GPIO_WritePin(GPIOA, GPIO_PIN_4, GPIO_PIN_RESET); // Deactivate Relay 2
                            HAL_GPIO_WritePin(GPIOA, GPIO_PIN_3, GPIO_PIN_SET); // Turn on Buzzer
                            HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET); // Turn on LED
                            `,
                                fullDescription: `The General & Digital Output section includes two relays for controlling high-power devices, 
                            a buzzer for audio feedback, and an LED for status indication. The relays are connected to pins A1 and A4, 
                            the buzzer to A3, and the LED to C13. This combination allows for flexible control and signaling in embedded applications.`
                            },
                            {
                                id: 'lcd16x2',
                                title: '16x2 LCD Section',
                                description: 'Alphanumeric LCD display with contrast adjustment',
                                images: ['parts/display.png'],
                                highlights: [
                                    { x: 27, y: 0, width: 53, height: 17 }
                                ],
                                specifications: [
                                    '<strong>Type:</strong> 16x2 character LCD',
                                    '<strong>Display Capability:</strong> Alphanumeric characters and basic symbols',
                                    '<strong>Contrast Adjustment:</strong> Potentiometer control for visibility'
                                ],
                                connections: [
                                    '<strong>RS:</strong> B11',
                                    '<strong>E:</strong> A8',
                                    '<strong>D4:</strong> B13',
                                    '<strong>D5:</strong> B14',
                                    '<strong>D6:</strong> B15',
                                    '<strong>D7:</strong> B12'
                                ],
                                code: `// Example: Initializing 16x2 LCD
                            #include "lcd.h"

                            void LCD_Init(void) {
                                // Initialize LCD in 4-bit mode
                                LCD_Command(0x28); // 4-bit mode, 2 lines, 5x8 font
                                LCD_Command(0x0C); // Display ON, Cursor OFF
                                LCD_Command(0x06); // Increment cursor
                                LCD_Clear();
                            }`,
                                fullDescription: `The 16x2 LCD section allows for the display of alphanumeric characters and basic symbols. 
                            It uses a potentiometer for contrast adjustment, ensuring clear visibility under various lighting conditions. 
                            The LCD operates in 4-bit mode, reducing pin usage while still providing full display functionality.`
                            }
                        ]
                    },
                    {
                        name: "BMS Section",
                        sections: [
                            // 2.1 RTC Cell
                                    {
                                        id: 'rtc_cell',
                                        title: 'RTC Cell',
                                        description: 'Built-in Real-Time Clock with VBAT backup on STM32F103C8T6',
                                        images: ['parts/rtccellbms.png'],
                                        highlights: [
                                            { x: 67, y: 44, width: 17, height: 13 }
                                        ],
                                        specifications: [
                                            '<strong>Backup Power:</strong> VBAT pin maintains RTC & backup registers',
                                            '<strong>Functionality:</strong> Keeps time/date when VCC is removed',
                                            '<strong>Battery Type:</strong> CR2032'
                                        ],
                                        connections: [
                                            '<strong>VBAT (+):</strong> Positive terminal of CR2032 battery',
                                            '<strong>GND (-):</strong> Negative terminal of battery'
                                        ],
                                        code: `// Example: Enable RTC
                                    void RTC_Init(void) {
                                        // Configure RTC clock source & enable backup domain
                                    }`,
                                        fullDescription: `The STM32F103C8T6 MCU's Real-Time Clock can continue running using the VBAT pin and a CR2032 battery, even when main power is off.`
                                    },
                                    
                                    // 2.2 OLED
                                    {
                                        id: 'oled_display',
                                        title: 'OLED Display',
                                        description: 'Low-power OLED display using I2C interface',
                                        images: ['parts/oled.png'],
                                        highlights: [
                                            { x: 52, y: 51, width: 17, height: 15 }
                                        ],
                                        specifications: [
                                            '<strong>Display Type:</strong> OLED (Organic LED)',
                                            '<strong>Resolution:</strong> 128x64',
                                            '<strong>Operating Voltage:</strong> 3.3V–5V',
                                            '<strong>Interface:</strong> I2C'
                                        ],
                                        connections: [
                                            '<strong>SDA:</strong> B11',
                                            '<strong>SCL:</strong> B10'
                                        ],
                                        code: `// Example: OLED Init via I2C
                                    void OLED_Init(void) {
                                        // Send initialization commands
                                    }`,
                                        fullDescription: `The OLED display provides high contrast output and is controlled via I2C for minimal wiring.`
                                    },
                                    
                                    // 2.3 LED
                                    {
                                        id: 'status_led',
                                        title: 'LED',
                                        description: 'Status indicator LED',
                                        images: ['parts/led.png'],
                                        highlights: [
                                            {  x: 52, y: 65, width: 17, height: 5}
                                        ],
                                        specifications: [
                                            '<strong>Type:</strong> Single color LED',
                                            '<strong>Function:</strong> Status indication'
                                        ],
                                        connections: [
                                            '<strong>LED:</strong> C13'
                                        ],
                                        fullDescription: `A single LED connected to pin C13 is used as a status indicator.`
                                    },
                                    
                                    // 2.4 2x3 Matrix Keypad
                                    {
                                        id: 'keypad_2x3',
                                        title: '2x3 Matrix Keypad',
                                        description: '6-key matrix keypad for user input',
                                        images: ['parts/23keyboard.png'],
                                        highlights: [
                                            {  x: 52, y: 70, width: 17, height: 15}
                                        ],
                                        specifications: [
                                            '<strong>Rows:</strong> 2 (R1, R2)',
                                            '<strong>Columns:</strong> 3 (C1, C2, C3)',
                                            '<strong>Total Keys:</strong> 6'
                                        ],
                                        connections: [
                                            '<strong>R1:</strong> PA8',
                                            '<strong>R2:</strong> PA9',
                                            '<strong>C1:</strong> PA10',
                                            '<strong>C2:</strong> PB14',
                                            '<strong>C3:</strong> PB15'
                                        ],
                                        fullDescription: `The 2x3 matrix keypad provides numeric and functional input in a compact form factor.`
                                    },
                                    
                                    // 2.5 Buzzer
                                    {
                                        id: 'buzzer',
                                        title: 'Buzzer',
                                        description: 'Audio feedback buzzer',
                                        images: ['parts/buzzer.png'],
                                        highlights: [
                                            { x: 80, y: 40, width: 15, height: 15 }
                                        ],
                                        specifications: [
                                            '<strong>Type:</strong> Piezo buzzer',
                                            '<strong>Function:</strong> Audio alerts'
                                        ],
                                        connections: [
                                            '<strong>Buzzer:</strong> A3'
                                        ],
                                        fullDescription: `A buzzer connected to A3 is used for audio notifications.`
                                    },
                                    
                                
                                    // 2.7 BMP280 Sensor
                                    {
                                        id: 'bmp280',
                                        title: 'BMP280 Sensor',
                                        description: 'Barometric pressure & temperature sensor',
                                        images: ['parts/bmp.jpg'],
                                        highlights: [
                                            { x: 65, y: 53, width: 20, height: 13 }
                                        ],
                                        specifications: [
                                            '<strong>Operating Voltage:</strong> 3.3V–5V',
                                            '<strong>Temperature Range:</strong> -40°C to 85°C',
                                            '<strong>Pressure Range:</strong> 300–1100 hPa',
                                            '<strong>Accuracy:</strong> ±1 hPa (pressure), ±1°C (temperature)',
                                            '<strong>Interface:</strong> SPI'
                                        ],
                                        connections: [
                                            '<strong>SCK:</strong> PB3',
                                            '<strong>MISO:</strong> PB4',
                                            '<strong>MOSI:</strong> PB5',
                                            '<strong>CS:</strong> PA15'
                                        ],
                                        fullDescription: `Measures barometric pressure and temperature, ideal for weather monitoring and altitude measurement.`
                                    },
                                    
                                   
                                    // // 2.9 Slide Switch
                                    // {
                                    //     id: 'slide_switch',
                                    //     title: 'Slide Switch',
                                    //     highlights: [
                                    //         { x: 38, y: 45, width: 30, height: 7 }
                                    //     ],
                                    //     description: 'Manual power control switch for BMS section',
                                    //     images: ['parts/slideswitch.png'],
                                    //     specifications: [
                                    //         '<strong>Type:</strong> Slide switch',
                                    //         '<strong>Function:</strong> Power on/off for BMS section'
                                    //     ],
                                    //     fullDescription: `A manual slide switch controls the power supply to the BMS section, allowing quick isolation.`
                                    // },
                                    
                                    // 2.10 Bluetooth Module (HC-05)
                                    {
                                        id: 'bluetooth_hc05',
                                        title: 'Bluetooth Module (HC-05)',
                                        description: 'Wireless serial communication module with Bluetooth 2.0',
                                        images: ['parts/bt.png'],
                                        highlights: [
                                            { x: 83, y: 53, width: 15, height: 15 }
                                        ],
                                        specifications: [
                                            '<strong>Operating Voltage:</strong> 3.3V logic (5V tolerant)',
                                            '<strong>Communication:</strong> UART (9600 baud default)',
                                            '<strong>Modes:</strong> Master & Slave',
                                            '<strong>Range:</strong> Up to 10 meters',
                                            '<strong>Bluetooth Version:</strong> 2.0 + EDR'
                                        ],
                                        connections: [
                                            '<strong>RX:</strong> PA3',
                                            '<strong>TX:</strong> PA2'
                                        ],
                                        fullDescription: `Enables wireless communication between microcontrollers, PCs, and mobile devices.`
                                    },
                                    
                                    
                          ]
                    },
                    {
                        name: "Sensing & charging",
                        sections: [
                        {
                                id: 'current_sensors',
                                title: 'Three Current Sensors (Shunt)',
                                description: 'High-accuracy current measurement using low-resistance shunt resistors',
                                images: [],
                                highlights: [
                                ],
                                specifications: [
                                    '<strong>Operating Voltage:</strong> Depends on ADC circuit (3.3V or 5V)',
                                    '<strong>Current Range:</strong> Milliamps to hundreds of amps (based on shunt value)',
                                    '<strong>Shunt Resistance:</strong> 0.1Ω (minimizes power loss)',
                                    '<strong>Output Signal:</strong> Analog voltage proportional to current'
                                ],
                                connections: [
                                    '<strong>Sensor 1:</strong> PB0',
                                    '<strong>Sensor 2:</strong> PA0',
                                    '<strong>Sensor 3:</strong> PA7'
                                ],
                                fullDescription: `A shunt resistor placed in series with the load generates a small voltage drop proportional to current (Ohm’s Law: V = I × R). The ADC converts this voltage into a measurable signal, enabling precise current monitoring for power systems, BMS, and industrial control.`
                            },
                        {
                            id: 'voltage_sensors',
                            title: 'Two Voltage Sensors (Voltage Divider)',
                            description: 'Voltage dividers for reducing input voltage to safe ADC levels',
                            images: [],
                            highlights: [
                           ],
                            specifications: [
                                '<strong>Type:</strong> Resistive voltage divider',
                                '<strong>Resistors:</strong> Two equal 10kΩ resistors',
                                '<strong>Division Ratio:</strong> 1:2 (halves the input voltage)',
                                '<strong>Interface:</strong> ADC input'
                            ],
                            connections: [
                                '<strong>Voltage Divider 1:</strong> PA4',
                                '<strong>Voltage Divider 2:</strong> PA5'
                            ],
                            fullDescription: `The voltage divider reduces higher voltages to a safe range for the ADC by using two equal 10kΩ resistors. This ensures that voltage measurements remain within MCU limits while providing accurate monitoring of system voltages.`
                        },
                        // 4.1 Charge-Discharge Module (6-pin)
                        {
                            id: 'charge_discharge_module',
                            title: 'Charge-Discharge Module (6-pin)',
                            description: 'Module for battery charging and discharging with protection features',
                            images: ['parts/charging_unit1.jpg'],
                            highlights: [
                                { x: 40, y: 54, width: 13, height: 17 }
                            ],
                            specifications: [
                                '<strong>Input Pins:</strong> 2 (connected to DC jack, ~5V or higher)',
                                '<strong>Battery Pins:</strong> 2 (connected to 3.7V, 200mAh Li-ion battery)',
                                '<strong>Load Output Pins:</strong> 2 (supply power to external loads)',
                                '<strong>Protection:</strong> Overcharge, over-discharge, and short-circuit protection'
                            ],
                            connections: [
                                '<strong>Input:</strong> DC Jack (~5V)',
                                '<strong>Battery:</strong> 3.7V Li-ion',
                                '<strong>Load:</strong> External circuits via output pins'
                            ],
                            fullDescription: `This 6-pin charge-discharge module manages charging and discharging of a 3.7V, 200mAh Li-ion battery. 
                        It has dedicated input pins for the DC jack, battery pins for charging/discharging, and load pins for powering external circuits. 
                        Built-in protection circuits prevent overcharge, over-discharge, and short-circuit conditions.`
                        },

                        // 4.2 DPDT Relay for Battery Charging Control
                        {
                            id: 'dpdt_relay',
                            title: 'DPDT Relay for Battery Charging Control',
                            description: 'Relay controlled by the Blue Pill MCU for safe battery charging management',
                            images: ['parts/charging_unit3.jpg'],
                            highlights: [
                                { x: 40, y: 72, width: 13, height: 12 }
                            ],
                            specifications: [
                                '<strong>Type:</strong> DPDT relay',
                                '<strong>Control:</strong> Managed by Blue Pill BMS MCU',
                                '<strong>Function:</strong> Switches battery charging on/off',
                                '<strong>Protection:</strong> Disconnects battery under unsafe conditions (voltage/temperature)'
                            ],
                            connections: [
                                '<strong>Relay Control Pin:</strong> PA1'
                            ],
                            fullDescription: `The DPDT relay is controlled by the BMS Blue Pill microcontroller to manage battery charging. 
                        In its normal position, DC power is available to charge the battery. In the switched position, the BMS can disconnect the battery 
                        from the charger to protect against unsafe conditions such as overvoltage, overheating, or other faults.`
                        },

                        // 4.3 Control Slide Switch with LED
                        {
                            id: 'charge_control_switch',
                            title: 'Slide Switch for Battery Charging Control',
                            description: 'Manual control of battery charging with LED indicator',
                            images: ['parts/charging_unit2.jpg'],
                            highlights: [
                                { x: 40, y: 43, width: 13, height: 9 }
                            ],
                            specifications: [
                                '<strong>Type:</strong> Slide switch with LED indicator',
                                '<strong>Function:</strong> Enables/disables battery charging from DC jack',
                                '<strong>Purpose:</strong> Prevents overcharging or unintended charging'
                            ],
                            connections: [
                                '<strong>Switch Control:</strong> Inline with DC jack input',
                                '<strong>LED:</strong> Indicates charging status'
                            ],
                            fullDescription: `The slide switch provides manual control over battery charging from the DC jack. 
                        It includes an LED indicator to display charging status, giving the user direct control to enable or disable charging 
                        and prevent unnecessary or unsafe charging situations.`
                        }
                    ]
                    },
                    {
                        name:"Battery",
                        sections:[
                            // 5.1 Battery (3.7V, 2000mAh Li-ion)
                        {
                            id: 'battery',
                            title: 'Battery (3.7V, 2000mAh Li-ion)',
                            description: 'Primary energy storage unit with controlled charge-discharge cycles',
                            images: ['parts/battery.jpg'],
                            highlights: [
                                { x: 12, y: 45, width: 13, height: 39 }
                            ],
                            specifications: [
                                '<strong>Type:</strong> Li-ion rechargeable battery',
                                '<strong>Voltage:</strong> 3.7V',
                                '<strong>Capacity:</strong> 2000mAh',
                                '<strong>Monitoring:</strong> NTC sensor for temperature feedback',
                                '<strong>Control:</strong> BMS Blue Pill MCU with DPDT relay'
                            ],
                            connections: [
                                '<strong>NTC Sensor:</strong> PA6 (temperature monitoring)'
                            ],
                            fullDescription: `This is the main energy storage unit for the embedded kit. The 3.7V, 2000mAh Li-ion battery 
                        is monitored by an NTC thermistor to track temperature. The BMS Blue Pill manages charging and discharging cycles 
                        via a DPDT relay to prevent overcharge, deep discharge, or unsafe thermal conditions.`
                        },

                        // 5.2 Load Resistors (Discharge Circuit) & Control Mechanisms
                        {
                            id: 'load_resistors',
                            title: 'Load Resistors (Discharge Circuit) & Control Mechanisms',
                            description: 'Dummy resistors with slide switches for controlled discharge testing',
                            images: ['parts/loadresistors.jpg'],
                            highlights: [
                                { x: 24, y: 45, width: 17, height: 35 }
                            ],
                            specifications: [
                                '<strong>Resistor 1:</strong> 22Ω (2W) → 0.62W dissipation at 3.7V',
                                '<strong>Resistor 2:</strong> 47Ω (2W) → 0.29W dissipation at 3.7V',
                                '<strong>Resistor 3:</strong> 56Ω (2W) → 0.24W dissipation at 3.7V',
                                '<strong>Safe Limits:</strong> All below 2W rating',
                                '<strong>Control:</strong> Individual slide switches with LED indicators'
                            ],
                            connections: [
                                '<strong>Switches:</strong> Inline with each resistor load',
                                '<strong>LED Indicators:</strong> Show active load status'
                            ],
                            fullDescription: `The discharge circuit uses three resistors (22Ω, 47Ω, and 56Ω) as dummy loads to test 
                        battery performance. Each resistor can be enabled or disabled individually through a slide switch, with 
                        an LED indicator showing the active load. This setup allows controlled testing of discharge rates while 
                        remaining within safe power limits.`
                        },

                        // 5.3 Temperature Monitoring (NTC Sensor)
                        {
                            id: 'ntc_sensor',
                            title: 'Temperature Monitoring (NTC Sensor)',
                            description: 'NTC thermistor-based battery temperature monitoring system',
                            images: ['parts/ntcsensor.jpg'],
                            highlights: [
                                {x: 24, y: 75, width: 17, height: 10 }
                            ],
                            specifications: [
                                '<strong>Type:</strong> NTC thermistor',
                                '<strong>Placement:</strong> Attached to battery surface',
                                '<strong>Interface:</strong> ADC input',
                                '<strong>Safety Feature:</strong> Cuts off charging/discharging above 50°C'
                            ],
                            connections: [
                                '<strong>NTC:</strong> PA6 (ADC input)'
                            ],
                            fullDescription: `The NTC thermistor monitors the battery temperature by changing resistance as heat increases. 
                        The Blue Pill reads this data via ADC. If the battery temperature exceeds a threshold (e.g., 50°C), 
                        charging or discharging is cut off automatically to prevent damage and ensure safety.`
                        }

                        ]
                    }
                ],

                init() {
                    // Set up image dimensions for responsive highlighting
                    this.updateImageDimensions();
                    window.addEventListener('resize', () => {
                        this.updateImageDimensions();
                    });
                },

                updateImageDimensions() {
                    const img = document.getElementById('mainImage');
                    if (img) {
                        this.imageWidth = img.offsetWidth;
                        this.imageHeight = img.offsetHeight;
                    }
                },

                selectSection(section) {
                    this.selectedSection = section;
                    this.updateImageDimensions();
                    this.scrollUp()
                },

                closeDetail() {
                    this.selectedSection = null;
                },

                getHighlightStyle(highlight) {
                    if (!highlight) return '';

                    const x = (highlight.x / 100) * this.imageWidth;
                    const y = (highlight.y / 100) * this.imageHeight;
                    const width = (highlight.width / 100) * this.imageWidth;
                    const height = (highlight.height / 100) * this.imageHeight;

                    return `
                        left: ${x}px;
                        top: ${y}px;
                        width: ${width}px;
                        height: ${height}px;
                    `;
                }
                ,
                scrollUp(){
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth' // smooth animation
                    });

                }
            }
        }
    </script>
</body>
</html>